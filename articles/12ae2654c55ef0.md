---
title: "web APIの作成方法"
emoji: "🔥"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: []
published: false
---


# 誰でもアクセスできるAPIを作成する

## 事前知識
![](/images/rest-api.png)
https://serverless.co.jp/blog/6zp8gbrwmsu/


# エンドポイント
ユーザーに関する機能であれば、エンドポイントは「/USERS」に設定します。
・登録
・更新
・削除

これらの機能を割り当てることにします。

# HTTPメソッド
エンドポイントに対して、HTTPメソッドを割り当てる必要があるみたいです。
・POST
・PUT
・GET
・DELETE
・PATCH

# サンプルコード
![](/images/api-hello-world.png)
以下のコードで実際にAPIの動作を確認することができます。
・フロント側のサンプルコード
```TSX
import { useState, useEffect } from 'react'
import './App.css'


const PORT = 3001;

function App() {
  const [testData, setTestData] = useState<{message: string, timestamp: string} | null>(null)

  //テスト用のAPIからデータを取得する
  const testUrl = `http://localhost:${PORT}/api/data`;

  useEffect(() => {
      fetch (testUrl) 
        .then(response => response.json())
        .then(data => {
          setTestData(data);
        })
        .catch(error => console.error('エラー：', error))
  },[]) //空の依存配列を渡すことで、アプリケーションのマウント時のみ起動させる


  return (
    <>
      <div className="container">
        <h1>Hello,World</h1>
        <div className="test-lists">
          <p>メッセージ: {testData ? testData.message : <p></p>}</p>
          <p>タイムスタンプ: {testData ? testData.timestamp : <p></p>}</p>
        </div>
      </div>
    </>
  )
}

export default App
```

・バックエンド
```TSX
import express, { Request, Response } from 'express';
import cors from 'cors';

const app = express();
const PORT = 3001;

// ミドルウェア
app.use(cors());
app.use(express.json());

// テスト用のAPIエンドポイント
app.get('/api/data', (req: Request, res: Response) => {
  const data = {
    message: "サーバーからのメッセージです！",
    timestamp: new Date().toISOString()
  };
  res.json(data);
});

// サーバー起動
app.listen(PORT, () => {
  console.log(`✅ サーバーがポート ${PORT} で起動しました`);
  console.log(`📍 http://localhost:${PORT}`);
});
```


